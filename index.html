<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Check</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Roboto', Arial, sans-serif;
        background: linear-gradient(135deg, 
            #2d1b69 0%, 
            #5b247a 20%, 
            #1e3a8a 40%, 
            #7c2d12 60%, 
            #581c87 80%, 
            #2d1b69 100%
        );
        background-size: 400% 400%;
        animation: galaxyShift 20s ease infinite;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        position: relative;
        overflow: hidden;
    }

    @keyframes galaxyShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }

    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.4) 0%, transparent 50%),
            radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
            radial-gradient(circle at 50% 50%, rgba(236, 72, 153, 0.3) 0%, transparent 60%);
        animation: nebulaPulse 10s ease-in-out infinite;
        pointer-events: none;
    }

    @keyframes nebulaPulse {
        0%, 100% { opacity: 0.7; }
        50% { opacity: 1; }
    }

    .stars {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
    }

    .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle 3s infinite;
        box-shadow: 0 0 8px rgba(255, 255, 255, 0.9);
    }

    @keyframes twinkle {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }

    .main-container {
        position: relative;
        z-index: 10;
    }

    /* Step 1: Checkbox */
    .captcha-box {
        background: white;
        border: 1px solid #d3d3d3;
        border-radius: 3px;
        padding: 15px;
        width: 300px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    .checkbox-container {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 10px;
    }

    .checkbox {
        width: 28px;
        height: 28px;
        border: 2px solid #c1c1c1;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
    }

    .checkbox:hover {
        border-color: #8b5cf6;
    }

    .checkbox.checked::after {
        content: '‚úì';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 20px;
        color: #8b5cf6;
        font-weight: bold;
    }

    .checkbox-container label {
        font-size: 14px;
        color: #333;
        cursor: pointer;
        user-select: none;
    }

    .captcha-logo {
        display: flex;
        align-items: center;
        gap: 8px;
        padding-top: 8px;
        border-top: 1px solid #e8e8e8;
        font-size: 11px;
        color: #555;
    }

    .captcha-logo img {
        width: 32px;
        height: 32px;
    }

    .captcha-logo span {
        font-size: 10px;
        color: #9b9b9b;
    }

    .privacy-links {
        margin-left: auto;
        font-size: 9px;
        color: #9b9b9b;
    }

    /* Step 2: Modal Grid */
    .captcha-modal {
        background: white;
        border-radius: 4px;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
        width: 400px;
        max-width: 90vw;
    }

    .modal-header {
        padding: 20px;
        border-bottom: 1px solid #e8e8e8;
        text-align: center;
    }

    .modal-header h3 {
        font-size: 14px;
        font-weight: 400;
        color: #555;
        margin-bottom: 5px;
    }

    .modal-header h1 {
        font-size: 18px;
        font-weight: 500;
        color: #333;
        margin-bottom: 8px;
    }

    .modal-header p {
        font-size: 12px;
        color: #888;
    }

    .grid-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 3px;
        padding: 3px;
        background: #e8e8e8;
    }

    .grid-tile {
        aspect-ratio: 1;
        background-size: cover;
        background-position: center;
        cursor: pointer;
        position: relative;
        transition: all 0.2s ease;
    }

    .grid-tile:hover {
        opacity: 0.8;
    }

    .grid-tile.selected::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(139, 92, 246, 0.5);
        border: 3px solid #8b5cf6;
    }

    .grid-tile.selected::before {
        content: '‚úì';
        position: absolute;
        top: 5px;
        left: 5px;
        background: #8b5cf6;
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        z-index: 1;
    }

    .modal-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        border-top: 1px solid #e8e8e8;
    }

    .icons {
        display: flex;
        gap: 15px;
        font-size: 18px;
        color: #555;
    }

    .icons span {
        cursor: pointer;
        opacity: 0.6;
    }

    .icons span:hover {
        opacity: 1;
    }

    .verify-btn {
        background: #4285f4;
        color: white;
        border: none;
        padding: 10px 24px;
        border-radius: 3px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .verify-btn:hover:not(:disabled) {
        background: #357ae8;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .verify-btn:disabled {
        background: #d3d3d3;
        cursor: not-allowed;
    }

    /* Step 3: Success */
    .success-screen {
        background: white;
        border-radius: 10px;
        padding: 60px 40px;
        text-align: center;
        box-shadow: 0 0 60px rgba(139, 92, 246, 0.6);
        max-width: 500px;
        animation: successFadeIn 0.8s ease;
    }

    @keyframes successFadeIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .success-screen h1 {
        font-size: 2.5em;
        margin-bottom: 20px;
        background: linear-gradient(90deg, #8b5cf6, #ec4899, #3b82f6, #8b5cf6);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rainbowShift 3s linear infinite;
    }

    @keyframes rainbowShift {
        0% { background-position: 0% 50%; }
        100% { background-position: 200% 50%; }
    }

    .success-screen .message {
        font-size: 1.15em;
        color: #2c3e50;
        line-height: 1.8;
        margin: 25px 0;
    }

    .success-screen .highlight {
        background: linear-gradient(90deg, #8b5cf6, #ec4899, #3b82f6, #8b5cf6);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: bold;
        animation: highlightShimmer 3s linear infinite;
    }

    @keyframes highlightShimmer {
        0% { background-position: 0% 50%; }
        100% { background-position: 200% 50%; }
    }

    .emoji-big {
        font-size: 4em;
        margin: 20px 0;
        animation: emojiPulse 2s ease-in-out infinite;
    }

    @keyframes emojiPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.2); }
    }

    .hidden {
        display: none;
    }
</style>
```

</head>

<body>
    <div class="stars" id="stars"></div>

```
<div class="main-container">

    <!-- Step 1: Checkbox -->
    <div class="captcha-box" id="step-checkbox">
        <div class="checkbox-container">
            <div class="checkbox" id="checkbox-btn"></div>
            <label for="checkbox-btn">I'm not a robot</label>
        </div>
        <div class="captcha-logo">
            <img src="https://www.gstatic.com/recaptcha/api2/logo_48.png" alt="logo">
            <span>reCAPTCHA</span>
            <div class="privacy-links">Privacy - Terms</div>
        </div>
    </div>

    <!-- Step 2: Grid Modal -->
    <div class="captcha-modal hidden" id="captcha-modal">
        <div class="modal-header">
            <h3>W√§hle alle Bilder mit</h3>
            <h1 id="instruction-text">Herzen</h1>
            <p>Klicke auf Verifizieren wenn keine mehr √ºbrig sind.</p>
        </div>

        <div class="grid-container" id="grid">
            <!-- Generated by JS -->
        </div>

        <div class="modal-footer">
            <div class="icons">
                <span class="icon-refresh">‚Ü∫</span>
                <span class="icon-audio">üéß</span>
                <span class="icon-info">‚ìò</span>
            </div>
            <button class="verify-btn" id="verify-btn" disabled>VERIFIZIEREN</button>
        </div>
    </div>

    <!-- Step 3: Success -->
    <div class="success-screen hidden" id="success-screen">
        <h1>Hallo, meine Sonne, meine Sterne, mein Mond</h1>
        <div class="emoji-big">‚òÄÔ∏èüåô‚≠ê</div>
        
        <div class="message">
            <p>Wir haben gerade eine <span class="highlight">schwierige Zeit</span>.<br>
            Das wei√ü ich. Das sp√ºre ich.</p>

            <p>Aber ich bin so <span class="highlight">unglaublich froh</span>,<br>
            dass wir beide wollen,<br>
            dass wir unsere Beziehung <span class="highlight">wieder auf die Beine bringen</span>.</p>

            <p>Wir haben ein <span class="highlight">tolles Kind</span> zusammen.<br>
            Und du k√ºmmerst dich <span class="highlight">so gut um Delia</span>.<br>
            Das sehe ich. Das sch√§tze ich.</p>

            <p>Du bist eine <span class="highlight">wunderbare Mutter</span>.<br>
            Und du bist <span class="highlight">mein Mensch</span>.</p>

            <p>Lass uns das gemeinsam schaffen.<br>
            Schritt f√ºr Schritt.<br>
            Tag f√ºr Tag.</p>

            <p style="margin-top: 30px; font-weight: 500; font-size: 1.1em;">
                Ich liebe dich ‚ù§Ô∏è
            </p>
        </div>
    </div>

</div>

<script>
    // ======================
    // CONFIGURATION
    // ======================
    const CONFIG = {
        // Using emoji placeholders until real images are uploaded
        useEmojis: true,
        correctEmoji: '‚ù§Ô∏è',
        incorrectEmojis: ['üåü', 'üåô', '‚≠ê', 'üî∑', 'üî∂', 'üéµ'],
        
        // When you upload real images, set useEmojis to false
        correctImages: [
            'images/correct1.jpg',
            'images/correct2.jpg',
            'images/correct3.jpg',
        ],
        incorrectImages: [
            'images/incorrect1.jpg',
            'images/incorrect2.jpg',
            'images/incorrect3.jpg',
            'images/incorrect4.jpg',
            'images/incorrect5.jpg',
            'images/incorrect6.jpg',
        ],
    };

    // ======================
    // ELEMENTS
    // ======================
    const checkbox = document.getElementById('checkbox-btn');
    const stepCheckbox = document.getElementById('step-checkbox');
    const captchaModal = document.getElementById('captcha-modal');
    const grid = document.getElementById('grid');
    const verifyBtn = document.getElementById('verify-btn');
    const instructionText = document.getElementById('instruction-text');

    // ======================
    // STATE
    // ======================
    let currentRound = 0; // 0 = idle, 1 = boring round, 2 = valentine
    let selectedTiles = new Set();
    let gridData = [];

    // ======================
    // STARS
    // ======================
    function createStars() {
        const container = document.getElementById('stars');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = (Math.random() * 3) + 'px';
            star.style.height = star.style.width;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            container.appendChild(star);
        }
    }

    // ======================
    // STEP 1: CHECKBOX
    // ======================
    checkbox.addEventListener('click', () => {
        if (currentRound !== 0) return;
        
        checkbox.classList.add('checked');
        setTimeout(() => {
            stepCheckbox.classList.add('hidden');
            captchaModal.classList.remove('hidden');
            startRound1();
        }, 800);
    });

    // ======================
    // ROUND 1: BORING (Traffic Lights / Generic)
    // ======================
    function startRound1() {
        currentRound = 1;
        instructionText.innerText = "Sternen und Monden";
        setupBoringGrid();
    }

    function setupBoringGrid() {
        grid.innerHTML = '';
        selectedTiles.clear();
        gridData = [];
        verifyBtn.disabled = true;

        // Create boring grid with incorrect items
        for (let i = 0; i < 9; i++) {
            const tile = document.createElement('div');
            tile.className = 'grid-tile';
            
            if (CONFIG.useEmojis) {
                // Use emoji placeholder
                const emoji = CONFIG.incorrectEmojis[i % CONFIG.incorrectEmojis.length];
                tile.innerHTML = `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 3em; background: #f0f0f0;">${emoji}</div>`;
            } else {
                // Use actual image
                const imageUrl = CONFIG.incorrectImages[i % CONFIG.incorrectImages.length];
                tile.style.backgroundImage = `url('${imageUrl}')`;
            }
            
            tile.dataset.index = i;
            tile.dataset.correct = false;

            tile.addEventListener('click', () => toggleTile(tile, i));
            
            grid.appendChild(tile);
            gridData.push({ isCorrect: false });
        }
    }

    // ======================
    // ROUND 2: VALENTINE REVEAL
    // ======================
    function startRound2() {
        currentRound = 2;
        captchaModal.classList.add('valentine-mode');

        // Animate text change
        instructionText.style.transition = 'opacity 0.3s';
        instructionText.style.opacity = 0;
        
        setTimeout(() => {
            instructionText.innerText = "Herzen";
            instructionText.style.opacity = 1;
        }, 300);

        setTimeout(() => {
            setupValentineGrid();
        }, 400);
    }

    function setupValentineGrid() {
        grid.innerHTML = '';
        selectedTiles.clear();
        gridData = [];
        verifyBtn.disabled = true;

        // Random 3-4 correct images
        const correctCount = Math.floor(Math.random() * 2) + 3; // 3 or 4
        const correctPositions = new Set();
        
        while (correctPositions.size < correctCount) {
            correctPositions.add(Math.floor(Math.random() * 9));
        }

        for (let i = 0; i < 9; i++) {
            const isCorrect = correctPositions.has(i);
            const tile = document.createElement('div');
            tile.className = 'grid-tile';
            
            if (CONFIG.useEmojis) {
                // Use emoji placeholder
                const emoji = isCorrect 
                    ? CONFIG.correctEmoji 
                    : CONFIG.incorrectEmojis[Math.floor(Math.random() * CONFIG.incorrectEmojis.length)];
                tile.innerHTML = `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 3em; background: #f0f0f0;">${emoji}</div>`;
            } else {
                // Use actual image
                const imageUrl = isCorrect
                    ? CONFIG.correctImages[Math.floor(Math.random() * CONFIG.correctImages.length)]
                    : CONFIG.incorrectImages[Math.floor(Math.random() * CONFIG.incorrectImages.length)];
                tile.style.backgroundImage = `url('${imageUrl}')`;
            }
            
            tile.dataset.index = i;
            tile.dataset.correct = isCorrect;

            tile.addEventListener('click', () => toggleTile(tile, i));
            
            grid.appendChild(tile);
            gridData.push({ isCorrect });
        }
    }

    // ======================
    // TILE SELECTION
    // ======================
    function toggleTile(tile, index) {
        if (selectedTiles.has(index)) {
            selectedTiles.delete(index);
            tile.classList.remove('selected');
        } else {
            selectedTiles.add(index);
            tile.classList.add('selected');
        }
        verifyBtn.disabled = selectedTiles.size === 0;
    }

    // ======================
    // VERIFY BUTTON
    // ======================
    verifyBtn.addEventListener('click', () => {
        if (currentRound === 1) {
            // Show loading bubbles
            verifyBtn.innerHTML = `
                <div style="display: flex; gap: 5px; justify-content: center;">
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: white; animation: bounce 0.6s infinite alternate;"></div>
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: white; animation: bounce 0.6s 0.2s infinite alternate;"></div>
                    <div style="width: 8px; height: 8px; border-radius: 50%; background: white; animation: bounce 0.6s 0.4s infinite alternate;"></div>
                </div>
            `;

            setTimeout(() => {
                verifyBtn.innerHTML = "VERIFIZIEREN";
                startRound2();
            }, 1500);
        } else if (currentRound === 2) {
            // Check if correct
            let allCorrect = true;

            for (let index of selectedTiles) {
                if (gridData[index].isCorrect === false) {
                    allCorrect = false;
                    break;
                }
            }

            const totalCorrect = gridData.filter(item => item.isCorrect).length;
            if (selectedTiles.size !== totalCorrect) {
                allCorrect = false;
            }

            if (allCorrect) {
                showSuccess();
            } else {
                // Wrong - reload valentine grid
                setTimeout(() => {
                    setupValentineGrid();
                }, 500);
            }
        }
    });

    // ======================
    // SUCCESS SCREEN
    // ======================
    function showSuccess() {
        captchaModal.classList.add('hidden');
        document.getElementById('success-screen').classList.remove('hidden');
        launchConfetti();
    }

    // ======================
    // CONFETTI
    // ======================
    function launchConfetti() {
        const colors = ['#8b5cf6', '#ec4899', '#3b82f6', '#ffffff'];
        
        for (let i = 0; i < 100; i++) {
            const conf = document.createElement('div');
            conf.style.position = 'fixed';
            conf.style.left = Math.random() * 100 + 'vw';
            conf.style.top = '-10vh';
            conf.style.width = '10px';
            conf.style.height = '10px';
            conf.style.borderRadius = '50%';
            conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            conf.style.pointerEvents = 'none';
            conf.style.zIndex = '9999';
            conf.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
            document.body.appendChild(conf);

            setTimeout(() => conf.remove(), 6000);
        }

        // Add animation if not exists
        if (!document.getElementById('confetti-style')) {
            const style = document.createElement('style');
            style.id = 'confetti-style';
            style.innerHTML = `
                @keyframes fall {
                    to { 
                        transform: translateY(110vh) rotate(720deg); 
                        opacity: 0;
                    }
                }
                @keyframes bounce {
                    to { transform: translateY(-5px); }
                }
            `;
            document.head.appendChild(style);
        }
    }

    // ======================
    // INIT
    // ======================
    createStars();
</script>
```

</body>
</html>